/** angular-leap - v1.0.1 - 2014-03-08 */
"use strict";angular.module("angularLeap",[]),angular.module("angularLeap").provider("leapConfig",function(){var a,b={defaultTimeout:650,gestureIntense:.5};a=function(a){return angular.extend(b,a)},this.config=function(b){return a(b)},this.$get=function(){return a}}),angular.module("angularLeap").provider("leap",["leapConfigProvider",function(a){var b,c;c=function(a){return b||(b=new a.Leap.Controller({enableGestures:!0}),b.connect()),b},this.config=a,this.$get=["$window","leapConfig","leapFn",function(a,b,d){if(!a.Leap)throw new Error("You should include LeapJS Native JavaScript API");var e,f=function(a){var b,c="leap"+a.type;"circle"===a.type?(b=d.circleMovement(a),c+=b.type?b.type:""):"swipe"===a.type?(b=d.swipeMovement(a),c+=b.type?b.type:""):"screenTap"===a.type?b=a:"keyTap"===a.type&&(b=a),b&&angular.forEach(e[c.toLocaleLowerCase()],function(c){c(a,b)})},g=function(b,d){b=b.toLowerCase(),e||(e={},c(a).on("gesture",f)),e[b]instanceof Array?e[b].push(d):e[b]=[d]};return{controller:function(){return c(a)},getLastFrame:function(){return c(a).frame()},fn:d,config:b,onGesture:g,_listeners:e}}]}]),angular.module("angularLeap").factory("leapFn",["$timeout","leapConfig",function(a,b){var c,d,e,f,g=!1;return d=function(a){var c=a.startPosition[0]-a.position[0],d=a.startPosition[1]-a.position[1],e=a.startPosition[2]-a.position[2],f={x:{distance:Math.abs(c),type:c>0?"left":"right",direction:-c},y:{distance:Math.abs(d),type:d>0?"down":"up",direction:-d},z:{distance:Math.abs(e),type:0>e?"forward":"backward",direction:-e}};return f.isSwipe={left:c>0&&f.x.distance>b().gestureIntense,right:0>c&&f.x.distance>b().gestureIntense,up:0>d&&f.y.distance>b().gestureIntense,down:d>0&&f.y.distance>b().gestureIntense,forward:0>e&&f.z.distance>b().gestureIntense,backward:e>0&&f.z.distance>b().gestureIntense},f},f=function(a){var b,c=d(a);return angular.forEach(c,function(a){a.distance&&(b=b?b.distance>a.distance?b:a:a)}),b.movement=c,c.isSwipe[b.type]||(b=void 0),b},e=function(a){var b={count:Math.round(a.progress,10),type:a.normal[2]>0?"counterClockwise":"clockwise"};return b},c=function(b){var c=g;return!g&&b&&(g=!0,a(function(){g=!1},b)),c},{timeout:function(a){return c(a)},movement:function(a){return d(a)},swipeMovement:function(a){return f(a)},circleMovement:function(a){return e(a)}}}]),angular.module("angularLeap").directive("leapBind",["$interval","leap",function(a,b){return{restrict:"A",link:function(c,d,e){function f(a,b){var c=b.shift();return angular.isObject(a)?b.length?f(a[c],b):a[c]:a}function g(a){function b(a){return a.length>0}var c=[];return a.split(/(\w*)\.?\[([\w\d]*)\]/).filter(b).map(function(a){return a.split(".").filter(b)}).forEach(function(a){for(;a.length;)c.push(a.shift())}),c}function h(){var a=c.$eval(e.leapBind);angular.isObject(a)&&angular.forEach(a,function(a,d){c[d]=f(b.getLastFrame(),g(a))})}var i=50;angular.isDefined(e.leapBindUpdateRate)&&(i=e.leapBindUpdateRate),h(),a(h,i)}}}]),angular.forEach(["leapKeyTap","leapScreenTap","leapCircle","leapCircleClockwise","leapCircleCounterClockwise","leapSwipeLeft","leapSwipeRight","leapSwipeUp","leapSwipeDown","leapSwipeForward","leapSwipeBackward"],function(a){var b=a.replace(/([A-Z])/g," $1").split(" "),c=b[1].toLowerCase();b[2]&&(c+=b[2]),b[3]&&(c+=b[3]),angular.module("angularLeap").directive(a,["$parse","leap",function(b,c){return function(d,e,f){var g=b(f[a]),h=f.leapTimeout?f.leapTimeout:c.config().defaultTimeout;c.onGesture(a,function(a){c.fn.timeout(h)||d.$apply(function(){g(d,{$gesture:a})})})}}])});